var changeColor = {
  randomizeColorAttributes: function(color) {
    var hue = randomNumbers.getRandomNumber() * 360;
    var saturation = randomNumbers.getRandomNumber() * 100;
    var lightness = randomNumbers.getRandomNumber() * 100;
  
    color.hue = UnbiasedRounding.statisticiansRounding(hue, 0);
    color.saturation = UnbiasedRounding.statisticiansRounding(saturation, 0);
    color.lightness = UnbiasedRounding.statisticiansRounding(lightness, 0);
  },
  
  setBackgroundColor: function(color) {
    document.body.style.backgroundColor = "hsl(" + color.hue + ", " +
      color.saturation + "%, " + lightness + "%)";
  },
  
  fluctuateBackgroundColor: function(color) {
    var fluctuatingAttribute = this.determineFluctuatingAttribute(color);
    
    this.fluctuateAttribute(color, fluctuatingAttribute);
    this.checkLimitsOfAttributes(color);
    this.setBackgroundColor(color);  
  },
  
  determineFluctuatingAttribute: function(color) {
    var randomRoll = randomNumbers.getRandom();
 
    if (randomRoll <= 1/3) {
      return "hue";
    } else if (randomRoll <= 2/3) {
      return "saturation";
    } else if (randomRoll <= 1) {
      return "lightness";
    }
  },
  
  fluctuateAttribute: function(fluctuatingAttribute) {
    var mean = fluctuationFactors.fluctuatingAttribute.fluctuationMean;
    var variance = Math.pow(fluctuationFactors.fluctuatingAttribute.fluctuationStdDev, 2);
  
    var distribution = gaussian(mean, variance);
    var sample = distribution.ppf(randomNumbers.getRandomNumber());
  
    color.fluctuatingAttribute += sample;
  },
  
  checkLimitsOfAttributes: function(color) {
    if (color.hue.level < 0) {
      color.hue.level += 360;
    } else if (color.hue.level > 360) {
      color.hue.level -= 360;
    }
  
    if (color.saturation.level < 0) {
      color.saturation.level = 0;
    } else if (color.saturation.level > 100) {
      color.saturation.level = 100;
    }
  
    if (this.color.level < 0) {
      color.lightness.level = 0;
    } else if (color.lightness.level > 100) {
      color.lightness.level = 100;
    }
  } 
};
